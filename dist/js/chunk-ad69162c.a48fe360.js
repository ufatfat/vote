(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad69162c"],{"20ae":function(t,e,o){"use strict";o("ebc7")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,o){var n=o("1d80"),a=o("577e"),r=o("5899"),s="["+r+"]",i=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(t){return function(e){var o=a(n(e));return 1&t&&(o=o.replace(i,"")),2&t&&(o=o.replace(u,"")),o}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,o){var n=o("861d"),a=o("d2bb");t.exports=function(t,e,o){var r,s;return a&&"function"==typeof(r=e.constructor)&&r!==o&&n(s=r.prototype)&&s!==o.prototype&&a(t,s),t}},a15b:function(t,e,o){"use strict";var n=o("23e7"),a=o("44ad"),r=o("fc6a"),s=o("a640"),i=[].join,u=a!=Object,c=s("join",",");n({target:"Array",proto:!0,forced:u||!c},{join:function(t){return i.call(r(this),void 0===t?",":t)}})},a9e3:function(t,e,o){"use strict";var n=o("83ab"),a=o("da84"),r=o("94ca"),s=o("6eeb"),i=o("5135"),u=o("c6b6"),c=o("7156"),d=o("d9b5"),f=o("c04e"),p=o("d039"),l=o("7c73"),v=o("241c").f,h=o("06cf").f,g=o("9bf2").f,m=o("58a8").trim,b="Number",I=a[b],k=I.prototype,_=u(l(k))==b,w=function(t){if(d(t))throw TypeError("Cannot convert a Symbol value to a number");var e,o,n,a,r,s,i,u,c=f(t,"number");if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(o=c.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+c}for(r=c.slice(2),s=r.length,i=0;i<s;i++)if(u=r.charCodeAt(i),u<48||u>a)return NaN;return parseInt(r,n)}return+c};if(r(b,!I(" 0o1")||!I("0b1")||I("+0x1"))){for(var N,y=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof y&&(_?p((function(){k.valueOf.call(o)})):u(o)!=b)?c(new I(w(e)),o,y):w(e)},C=n?v(I):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),j=0;C.length>j;j++)i(I,N=C[j])&&!i(y,N)&&g(y,N,h(I,N));y.prototype=k,k.constructor=y,s(a,b,y)}},ab23:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{position:"relative"}},[o("div",{attrs:{id:"signInForm"}},[o("div",{staticClass:"formTitle"},[t._v("评委账号登录")]),o("el-form",{attrs:{id:"form"}},[o("el-form-item",[t._v(" 账号 "),o("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),o("el-form-item",[t._v(" 密码 "),o("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),o("div",{staticStyle:{display:"flex","justify-content":"center"}},[o("el-button",{attrs:{type:"primary"},on:{click:t.signIn}},[t._v("开始评审")])],1)],1)])},a=[],r=o("5530"),s=(o("ac1f"),o("1276"),o("159b"),o("b0c0"),o("d81d"),o("a9e3"),o("a15b"),o("2f62")),i=o("f8c8"),u={name:"SignIn",data:function(){return{phone:"",password:"",flag:0}},computed:Object(r["a"])({},Object(s["b"])(["userInfo","contestConfig","votedWorks","revoteWorks"])),mounted:function(){var t=this;this.token&&this.userInfo&&this.$router.push({path:"/"}),this.ws.handleRevoteStatus=function(e){if(20001===e.code){t.updateRevote(1);var o=JSON.parse(e.data);t.updateRevoteWorks(o)}else t.updateRevote(0),t.updateRevoteWorks([])},this.ws.handleVoted=function(e){var o;o="number"===typeof e.data?[e.data]:"string"===typeof e.data&&e.data.length>0?e.data.split(","):[],o.forEach((function(t,e){o[e]=~~o[e]})),t.updateRevoteVotedWorks(o)}},methods:Object(r["a"])(Object(r["a"])({},Object(s["c"])(["updateUserInfo","updateVoteInfo","updateContestConfig","updateVotedWorks","updateMaxIndex","updateRevote","updateRevoteWorks","updateRevoteVotedWorks","signOut"])),{},{signIn:function(){var t=this,e={username:this.phone,password:this.password};Object(i["k"])(e).then((function(e){t.$message({type:"success",message:"登录成功，正在跳转..."});var o=e.data.data;t.updateUserInfo({isRulesRead:o.is_rules_read,username:o.name,maxVotesNum:o.max_votes_num,isDone:o.is_done,judgeID:o.judge_id});var n=new WebSocket("ws://localhost:8080/voteapi/auth/ws?judge_id="+o.judge_id);t.ws.setWebsocket(n),t.updateVotedWorks(o.voted_works.length>0?o.voted_works.split(",").map(Number):[]),t.updateContestConfig({enableMarking:!1}),Object(i["e"])().then((function(e){var o=e.data,n=t.contestConfig;n.totalWorkNum=o,t.updateContestConfig(n)})),Object(i["d"])().then((function(e){var o=e.data,n=t.contestConfig;n.roundID=o.roundID,n.roundIdx=o.roundIdx,n.roundInfo=o.roundInfo,t.updateContestConfig(n),o={round_id:t.contestConfig.roundID},Object(i["b"])(o).then((function(e){var o=e.data,n=t.contestConfig;n.maxVotesNum=o,t.updateContestConfig(n)})),Object(i["f"])({voted_works:t.votedWorks.join(","),round_id:t.contestConfig.roundID}).then((function(e){var o=e.data;o.forEach((function(t){var e;t.checked=!0,""===t.name&&(t.name="测试"),(null===(e=!t.imgList)||void 0===e||e)&&(t.imgList=["https://ivillages-images.oss-cn-qingdao.aliyuncs.com/1/static/imgs/test.png"])})),t.updateVoteInfo(o)}))})),setTimeout((function(){t.$router.push({path:"/"})}),1e3)})).catch((function(e){404===e.response.status?t.$message({type:"error",message:"用户名/密码错误！"}):401===e.response.status&&t.$message({type:"error",message:"该账号不是当前比赛评委！"})}))}})},c=u,d=(o("20ae"),o("2877")),f=Object(d["a"])(c,n,a,!1,null,"4dc95272",null);e["default"]=f.exports},d81d:function(t,e,o){"use strict";var n=o("23e7"),a=o("b727").map,r=o("1dde"),s=r("map");n({target:"Array",proto:!0,forced:!s},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},ebc7:function(t,e,o){}}]);
//# sourceMappingURL=chunk-ad69162c.a48fe360.js.map