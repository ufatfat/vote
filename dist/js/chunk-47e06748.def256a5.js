(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47e06748"],{"04d1":function(t,e,n){var i=n("342f"),o=i.match(/firefox\/(\d+)/i);t.exports=!!o&&+o[1]},2532:function(t,e,n){"use strict";var i=n("23e7"),o=n("5a34"),a=n("1d80"),s=n("577e"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~s(a(this)).indexOf(s(o(t)),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),o=n("825a"),a=n("577e"),s=n("d039"),r=n("ad6d"),c="toString",u=RegExp.prototype,l=u[c],d=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=c;(d||f)&&i(RegExp.prototype,c,(function(){var t=o(this),e=a(t.source),n=t.flags,i=a(void 0===n&&t instanceof RegExp&&!("flags"in u)?r.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},"44e7":function(t,e,n){var i=n("861d"),o=n("c6b6"),a=n("b622"),s=a("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==o(t))}},"45a0":function(t,e,n){},"4e82":function(t,e,n){"use strict";var i=n("23e7"),o=n("1c0b"),a=n("7b0b"),s=n("50c4"),r=n("577e"),c=n("d039"),u=n("addb"),l=n("a640"),d=n("04d1"),f=n("d998"),h=n("2d00"),p=n("512ce"),g=[],v=g.sort,m=c((function(){g.sort(void 0)})),x=c((function(){g.sort(null)})),b=l("sort"),k=!c((function(){if(h)return h<70;if(!(d&&d>3)){if(f)return!0;if(p)return p<603;var t,e,n,i,o="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)g.push({k:e+i,v:n})}for(g.sort((function(t,e){return e.v-t.v})),i=0;i<g.length;i++)e=g[i].k.charAt(0),o.charAt(o.length-1)!==e&&(o+=e);return"DGBEFHACIJK"!==o}})),y=m||!x||!b||!k,w=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:r(e)>r(n)?1:-1}};i({target:"Array",proto:!0,forced:y},{sort:function(t){void 0!==t&&o(t);var e=a(this);if(k)return void 0===t?v.call(e):v.call(e,t);var n,i,r=[],c=s(e.length);for(i=0;i<c;i++)i in e&&r.push(e[i]);r=u(r,w(t)),n=r.length,i=0;while(i<n)e[i]=r[i++];while(i<c)delete e[i++];return e}})},"512ce":function(t,e,n){var i=n("342f"),o=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!o&&+o[1]},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5ae4":function(t,e,n){"use strict";n("45a0")},"787e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"250px"}},[n("div",{staticClass:"titleBox"},[n("span",{staticClass:"title"},[t._v("已选方案")]),n("span",{staticClass:"stats"},[t._v("已选作品数目："+t._s(t.voteInfo.length)),n("br"),t._v("待选作品数目："+t._s(t.contestConfig.maxVotesNum-t.voteInfo.length))])]),n("div",{staticClass:"selectedBox"},[t._l(t.voteInfo,(function(e,i){return[null!==e?[n("div",{key:i,staticClass:"selectedWorkBox"},[n("div",{staticStyle:{width:"148.5px",height:"210px"}},[n("el-image",{attrs:{src:e.imgList[0],lazy:""},on:{click:function(n){return n.stopPropagation(),t.jumpToDetailHandler(e)}}})],1),n("div",{staticStyle:{"margin-top":"5px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("span",{staticClass:"tipText"},[t._v(t._s(e.workIdx)+" - "+t._s(e.name))])])])]:t._e()]}))],2),t.contestConfig.maxVotesNum===t.voteInfo.length?[n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center"}},[n("el-button",{staticStyle:{width:"48%"},attrs:{type:"primary",icon:"el-icon-collection-tag",disabled:t.userInfo.isDone},on:{click:t.saveTemp}},[t._v("保存进度")]),n("el-button",{staticStyle:{width:"48%"},attrs:{type:"success",icon:"el-icon-collection-tag",disabled:t.userInfo.isDone},on:{click:t.submitVote}},[t._v("提交结果")])],1)]:[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-collection-tag"},on:{click:t.saveTemp}},[t._v("保存进度")])]],2)},o=[],a=n("5530"),s=(n("a15b"),n("2f62")),r=n("f8c8"),c={name:"Selected",data:function(){return{intervalIdx:0}},computed:Object(a["a"])({},Object(s["b"])(["userInfo","voteInfo","contestConfig","votedWorks"])),beforeDestroy:function(){this.saveTemp(),clearInterval(this.intervalIdx)},mounted:function(){var t=this;this.intervalIdx=setInterval((function(){t.userInfo.isDone||t.saveTemp()}),3e5)},methods:Object(a["a"])(Object(a["a"])({},Object(s["c"])(["updateVoteInfo","updateUserInfo"])),{},{jumpToDetailHandler:function(t){this.$router.push({path:"/detail/"+t.workID})},saveTemp:function(){var t=this,e={round_id:this.contestConfig.roundID,voted_works:this.votedWorks.join(","),round_idx:this.contestConfig.roundIdx};this.userInfo.isDone||Object(r["j"])(e).then((function(){t.$message({type:"success",message:"保存成功！"})})).catch((function(){t.$message({type:"error",message:"保存失败！"})}))},submitVote:function(){var t=this;this.$confirm("提交结果后不可再次修改，确认提交吗？","",{confirmButtonText:"提交",cancelButtonText:"取消",type:"warning"}).then((function(){var e={round_id:t.contestConfig.roundID,voted_works:t.votedWorks.join(","),round_idx:t.contestConfig.roundIdx};Object(r["l"])(e).then((function(){t.$message({type:"success",message:"保存成功！"});var e=t.userInfo;e.isDone=!0,t.updateUserInfo(e)})).catch((function(){t.$message({type:"error",message:"保存失败！"})}))}))}})},u=c,l=(n("5ae4"),n("2877")),d=Object(l["a"])(u,i,o,!1,null,"3eb255a0",null);e["a"]=d.exports},8873:function(t,e,n){},a15b:function(t,e,n){"use strict";var i=n("23e7"),o=n("44ad"),a=n("fc6a"),s=n("a640"),r=[].join,c=o!=Object,u=s("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(t){return r.call(a(this),void 0===t?",":t)}})},a434:function(t,e,n){"use strict";var i=n("23e7"),o=n("23cb"),a=n("a691"),s=n("50c4"),r=n("7b0b"),c=n("65f0"),u=n("8418"),l=n("1dde"),d=l("splice"),f=Math.max,h=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var n,i,l,d,v,m,x=r(this),b=s(x.length),k=o(t,b),y=arguments.length;if(0===y?n=i=0:1===y?(n=0,i=b-k):(n=y-2,i=h(f(a(e),0),b-k)),b+n-i>p)throw TypeError(g);for(l=c(x,i),d=0;d<i;d++)v=k+d,v in x&&u(l,d,x[v]);if(l.length=i,n<i){for(d=k;d<b-i;d++)v=d+i,m=d+n,v in x?x[m]=x[v]:delete x[m];for(d=b;d>b-i+n;d--)delete x[d-1]}else if(n>i)for(d=b-i;d>k;d--)v=d+i-1,m=d+n-1,v in x?x[m]=x[v]:delete x[m];for(d=0;d<n;d++)x[d+k]=arguments[d+2];return x.length=b-i+n,l}})},ab13:function(t,e,n){var i=n("b622"),o=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[o]=!1,"/./"[t](e)}catch(i){}}return!1}},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},addb:function(t,e){var n=Math.floor,i=function(t,e){var s=t.length,r=n(s/2);return s<8?o(t,e):a(i(t.slice(0,r),e),i(t.slice(r),e),e)},o=function(t,e){var n,i,o=t.length,a=1;while(a<o){i=a,n=t[a];while(i&&e(t[i-1],n)>0)t[i]=t[--i];i!==a++&&(t[i]=n)}return t},a=function(t,e,n){var i=t.length,o=e.length,a=0,s=0,r=[];while(a<i||s<o)a<i&&s<o?r.push(n(t[a],e[s])<=0?t[a++]:e[s++]):r.push(a<i?t[a++]:e[s++]);return r};t.exports=i},b811:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-container",{staticStyle:{"margin-top":"16px",height:"calc(100vh - 120px)"}},[n("el-main",{staticStyle:{height:"100%",width:"100%",padding:"0",display:"flex","justify-content":"center"}},[n("OverviewComp")],1),n("el-aside",{staticStyle:{height:"100%",display:"flex","justify-content":"center"}},[n("Selected")],1)],1)],1)},o=[],a=n("787e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"96%"}},[n("div",{staticClass:"titleBox"},[n("span",{staticClass:"title"},[t._v("全部方案")]),n("div",[n("el-tabs",{attrs:{"tab-position":"bottom"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"第一轮线上初评",name:"1",disabled:1!==t.contestConfig.roundIdx}}),n("el-tab-pane",{attrs:{label:"第二轮反票筛选",name:"2",disabled:2!==t.contestConfig.roundIdx}})],1)],1)]),n("div",{staticClass:"workContainer",staticStyle:{"flex-direction":"column"}},[t._l(t.sliceList(t.works,5),(function(e,i){return[n("div",{key:i,staticClass:"workRow",staticStyle:{width:"100%",display:"flex","justify-content":"space-evenly"}},[t._l(e,(function(e,i){return[n("div",{key:i,staticClass:"workBox",class:e.checked?"workBoxChecked":"",on:{click:function(n){return t.workBoxClickHandler(e)}}},[n("div",{staticClass:"imgNCheckBox"},[n("div",[n("el-checkbox",{attrs:{disabled:t.userInfo.isDone||t.contestConfig.maxVotesNum===t.votedWorks.length&&!e.checked},on:{click:function(t){if(t.target!==t.currentTarget)return null;t.preventDefault()}},model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item.checked"}})],1),n("div",{staticStyle:{width:"148.5px",height:"210px"}},[n("el-image",{attrs:{src:e.imgList[0],lazy:""},on:{click:function(n){return n.stopPropagation(),t.jumpToDetailHandler(e)}}})],1)]),n("div",{staticStyle:{"margin-top":"10px",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[n("span",{staticClass:"workName"},[t._v(t._s(e.workIdx)+" - "+t._s(e.name))]),n("span",{staticClass:"tipText"},[t._v("点击图片查看作品详情")])])])]}))],2)]}))],2),n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-pagination",{attrs:{layout:"total, sizes","page-size":t.num,total:t.contestConfig.totalWorkNum,"page-sizes":[10,20,50]},on:{"size-change":t.sizeChangeHandler,"update:pageSize":function(e){t.num=e},"update:page-size":function(e){t.num=e},"update:total":function(e){return t.$set(t.contestConfig,"totalWorkNum",e)}}}),n("el-pagination",{attrs:{layout:"prev, pager, next, jumper","current-page":t.page,"page-size":t.num,total:t.contestConfig.totalWorkNum,"page-sizes":[5,10,20,50]},on:{"current-change":t.pageChangeHandler,"update:pageSize":function(e){t.num=e},"update:page-size":function(e){t.num=e},"update:total":function(e){return t.$set(t.contestConfig,"totalWorkNum",e)}}})],1)])},r=[],c=n("5530"),u=(n("d3b7"),n("25f0"),n("a434"),n("c740"),n("4e82"),n("159b"),n("caad"),n("2532"),n("b0c0"),n("2f62")),l=n("f8c8"),d={name:"Overview",data:function(){return{page:1,num:10,total:0,works:[]}},mounted:function(){this.getData()},computed:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["voteInfo","votedWorks","contestConfig","userInfo"])),{},{activeName:function(){return this.contestConfig.roundIdx.toString()},sliceList:function(){return function(t,e){var n=0,i=[];if(void 0!==t)for(var o=0;o<t.length;o++)n=parseInt(o/e),i.length<=n&&i.push([]),i[n].push(t[o]);return i}}}),methods:Object(c["a"])(Object(c["a"])({},Object(u["c"])(["updateVoteInfo","updateVotedWorks"])),{},{pageChangeHandler:function(t){this.page=t,this.getData()},sizeChangeHandler:function(t){this.num=t,this.getData()},workBoxClickHandler:function(t){this.userInfo.isDone?this.$message({type:"warning",message:"已经提交过了，不能再更改了！"}):this.votedWorks.length!==this.contestConfig.maxVotesNum||t.checked?(t.checked=!t.checked,this.checkChangeHandler(t)):this.$message({type:"warning",message:"不能再选了！"})},jumpToDetailHandler:function(t){this.$router.push({path:"/detail/"+t.workID})},checkChangeHandler:function(t){var e=this.voteInfo,n=this.votedWorks;t.checked?(e.push(t),e.sort((function(t,e){return t.workID-e.workID})),n.push(t.workID),n.sort((function(t,e){return t-e}))):(e.splice(e.findIndex((function(e){return e.workID===t.workID})),1),n.splice(n.indexOf(t.workID),1)),this.updateVoteInfo(e),this.updateVotedWorks(n)},getData:function(){var t=this,e={page:this.page,num:this.num,round_idx:this.contestConfig.roundIdx};Object(l["d"])(e).then((function(e){var n=e.data;n.forEach((function(e){var n;t.votedWorks.includes(e.workID)?e.checked=!0:e.checked=!1,""===e.name&&(e.name="测试"),(null===(n=!e.imgList)||void 0===n||n)&&(e.imgList=["https://ivillages-images.oss-cn-qingdao.aliyuncs.com/1/static/imgs/test.png"])})),t.works=n}))}})},f=d,h=(n("c3ba"),n("2877")),p=Object(h["a"])(f,s,r,!1,null,"311e2cd7",null),g=p.exports,v={name:"Overview",components:{Selected:a["a"],OverviewComp:g}},m=v,x=Object(h["a"])(m,i,o,!1,null,"62282325",null);e["default"]=x.exports},c3ba:function(t,e,n){"use strict";n("8873")},c740:function(t,e,n){"use strict";var i=n("23e7"),o=n("b727").findIndex,a=n("44d2"),s="findIndex",r=!0;s in[]&&Array(1)[s]((function(){r=!1})),i({target:"Array",proto:!0,forced:r},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},caad:function(t,e,n){"use strict";var i=n("23e7"),o=n("4d64").includes,a=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},d998:function(t,e,n){var i=n("342f");t.exports=/MSIE|Trident/.test(i)}}]);
//# sourceMappingURL=chunk-47e06748.def256a5.js.map